(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/videoPage/videoPlayer/videoPlayer"],{"1ea6":function(e,o,t){"use strict";(function(e){t("e36c"),t("921b");i(t("66fd"));var o=i(t("7efe"));function i(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,t("6e42")["createPage"])},"4e87":function(e,o,t){"use strict";var i,a=function(){var e=this,o=e.$createElement;e._self._c},l=[];t.d(o,"b",function(){return a}),t.d(o,"c",function(){return l}),t.d(o,"a",function(){return i})},5672:function(e,o,t){"use strict";var i=t("f5f2"),a=t.n(i);a.a},7649:function(e,o,t){"use strict";(function(e,t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i={data:function(){return{videoContext:"",downButtonId:0,isAutoPlayNext:!0,clickButtonId:0,modalName:null,playUrl:"",oldPlayTime:"",video:{}}},onLoad:function(o){console.log(e(o," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:159"));var i=JSON.parse(o.video);console.log(e(i," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:161"));for(var a=i.show_url,l=[],n=0;n<a.length;n++){var d=a[n];l.push({name:"第"+(n+1)+"集",url:d.split("$")[1],type:d.split("$")[0]})}var r=i.down_url,s=[];for(n=0;n<r.length;n++){d=r[n];var u="0"==d.split("$")[0]?"100":"0";s.push({name:"第"+(n+1)+"集",url:d.split("$")[1],type:d.split("$")[0],downPersent:u})}i.show_url=l,i.down_url=s,this.video=i;var v=t.getStorageSync(this.video.id)||0;this.clickButtonId=v,this.playUrl=l[v].url,console.log(e("this.video"+this.video," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:196")),console.log(e("保存的所有key: "+t.getStorageInfoSync().keys," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:198")),this.oldPlayTime=t.getStorageSync(this.video.id+"_"+this.clickButtonId)||0,console.log(e("当前播放视频记录时 "+this.oldPlayTime," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:200"))},onUnload:function(){t.$off("drawer-page")},onReady:function(e){this.videoContext=t.createVideoContext("myVideo")},methods:{showModal:function(e){this.modalName=e.currentTarget.dataset.target},hideModal:function(e){this.modalName=null},onClickButton:function(o,i){console.log(e("点击按钮的id"+o+i," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:219")),this.clickButtonId=o,this.modalName=null,this.playUrl=i,this.oldPlayTime=t.getStorageSync(this.video.id+"_"+this.clickButtonId)||0},autoPlayNext:function(e){var o=this.video.show_url,i=o[this.clickButtonId+1];null!=i&&"undefined"!=i&&(this.playUrl=i.url,this.clickButtonId=this.clickButtonId+1,this.oldPlayTime=t.getStorageSync(this.video.id+"_"+this.clickButtonId)||0)},saveHis:function(o){var i=o.detail.currentTime,a=i-5;if(a<0&&(a=0),a%5==0&&(t.setStorageSync(this.video.id+"_"+this.clickButtonId,a),t.setStorageSync(this.video.id,this.clickButtonId),console.log(e("当前播放到滴 "+this.clickButtonId+"集"," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:265"))),i>300&&"true"==getApp().globalData.isShowPay){console.log(e("我进来了 onshow video"," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:272"));var l=t.getStorageSync("userinfo");l.length||0==l.length?(this.videoContext.stop(),t.showToast({title:"vip专享",duration:2e3})):l.vip?l.vip:(this.videoContext.stop(),t.showToast({title:"vip专享",duration:2e3}))}},back:function(){t.navigateBack()},downLoad:function(o,i){console.log(e("正在下载"+i," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:300")),this.video.down_url[o].type="0",this.video.down_url[o].downPersent="0";var a=this,l=t.downloadFile({url:i.url,success:function(i){console.log(e("下载到临时文件夹成功",i," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:308")),t.saveFile({tempFilePath:i.tempFilePath,success:function(i){var l=i.savedFilePath;console.log(e("保存文件情况",i," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:315"));for(var n=t.getStorageSync("saveVideo")||[],d=a.video,r=0;r<n.length;r++){var s=n[r];if(d.id==s.id){d=s,isDownEd=!0,n.splice(r,1);break}}for(var u=0;u<d.show_url.length;u++){var v=d.show_url[u];"0"==v.type?d.show_url[u]="0$"+d.show_url[u].url:d.show_url[u]="第"+u+"集$"+d.show_url[u].url}for(u=0;u<d.down_url.length;u++){v=d.down_url[u];"0"==v.type?d.down_url[u]="0$"+d.down_url[u].url:d.down_url[u]="第"+u+"集$"+d.down_url[u].url}d.show_url[o]="0$"+l,n.unshift(d),t.setStorageSync("saveVideo",n)},fail:function(o){console.log(e("保存失败",o," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:365"))}})},fail:function(o){console.log(e("下载到临时文件夹失败",o," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:370"))}}),n="1";l.onProgressUpdate(function(t){var i=t.progress;console.log(e("下载进度"+i," at pages\\videoPage\\videoPlayer\\videoPlayer.vue:380")),n!=i&&(n=i,a.video.down_url[o].downPersent=n)})}}};o.default=i}).call(this,t("0de9")["default"],t("6e42")["default"])},"7efe":function(e,o,t){"use strict";t.r(o);var i=t("4e87"),a=t("cd27");for(var l in a)"default"!==l&&function(e){t.d(o,e,function(){return a[e]})}(l);t("5672");var n,d=t("f0c5"),r=Object(d["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],n);o["default"]=r.exports},cd27:function(e,o,t){"use strict";t.r(o);var i=t("7649"),a=t.n(i);for(var l in i)"default"!==l&&function(e){t.d(o,e,function(){return i[e]})}(l);o["default"]=a.a},f5f2:function(e,o,t){}},[["1ea6","common/runtime","common/vendor"]]]);