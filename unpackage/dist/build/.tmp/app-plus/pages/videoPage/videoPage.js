(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/videoPage/videoPage"],{"1d40":function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",function(){return n}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return i})},"7d1a":function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a("a34a"));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return c(e)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){var a=[],i=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done);i=!0)if(a.push(r.value),t&&a.length===t)break}catch(u){n=!0,o=u}finally{try{i||null==s["return"]||s["return"]()}finally{if(n)throw o}}return a}function c(e){if(Array.isArray(e))return e}function h(e,t,a,i,n,o,r){try{var s=e[o](r),u=s.value}catch(c){return void a(c)}s.done?t(u):Promise.resolve(u).then(i,n)}function l(e){return function(){var t=this,a=arguments;return new Promise(function(i,n){var o=e.apply(t,a);function r(e){h(o,i,n,r,s,"next",e)}function s(e){h(o,i,n,r,s,"throw",e)}r(void 0)})}}var d=a("b33a"),g=function(){return a.e("components/refresh").then(a.bind(null,"9247"))},f=function(){return a.e("components/navTab").then(a.bind(null,"1e93"))},p=function(){return a.e("components/tabBar4").then(a.bind(null,"60e7"))},v=function(){return Promise.all([a.e("common/vendor"),a.e("components/uni-icons/uni-icons")]).then(a.bind(null,"0003"))},m={components:{refresh:g,navTab:f,tabBar4:p,uniIcon:v},data:function(){return{showOrHide:"hide",xuanzhuan:"down",currentPage:"videoPage",toView:"",tabTitle:["电影","","","",""],currentTab:0,pages:[1,1,1,1,1,1],clickButtonIds:[{cid:[0,0,0,0]},{cid:[0,0,0,0]},{cid:[0,0,0,0]}],paramsForEachPageShow:[[{name:"年代 :",link_name:"years",item:["","2020","2019","2018","2017","2016","2015"],itemName:["全部","2020","2019","2018","2017","2016","2015"]},{name:"分类 :",link_name:"pids",item:["","11","12","13"],itemName:["全部","武打","动作","科幻"]},{name:"排序 :",link_name:"sortWay",item:["","0","1","2"],itemName:["全部","上映时间","更新时间","评分"]},{name:"区域 :",link_name:"area",item:["","美国","中国","日本"],itemName:["全部","美国","中国","日本"]}]],paramsForEachPage:[{ppid:"",pids:"",years:"",sortWay:"1",area:"",currentPageNum:0,pageSize:16},{ppid:"",pids:"",years:[],sortWay:"1",currentPageNum:0,pageSize:16}],list:[],listHot:[[{picture:"https://tu.tianzuida.com/pic/upload/vod/2019-12-31/201912311577754419.jpg"},{picture:"https://tu.tianzuida.com/pic/upload/vod/2019-12-31/201912311577754419.jpg"}]]}},onLoad:function(t){e.showLoading({title:"加载中"}),setTimeout(function(){e.hideLoading()},2e3),this.getCatogory()},onShow:function(){},onHide:function(){},methods:{toTop:function(){var e=this;this.toView="",setTimeout(function(){e.toView="top"+e.currentTab},10)},changeTab:function(e){this.currentTab=e,console.log(i("当前滑动到分类 "+e," at pages\\videoPage\\videoPage.vue:232"))},swiperTab:function(e){var t=e.detail.current;this.$refs.navTab.longClick(t),console.log(i("当前滑动窗体到分类 "+t," at pages\\videoPage\\videoPage.vue:239"))},lower1:d.throttle(function(t){0!=this.currentTab&&(console.log(i("加载".concat(this.currentTab)," at pages\\videoPage\\videoPage.vue:246")),e.showLoading({title:"加载中",mask:!0}),this.pages[this.currentTab]++,this.getVideoList("1"))},300),refreshStart:function(e){this.$refs.refresh.refreshStart(e)},refreshMove:function(e){this.$refs.refresh.refreshMove(e)},refreshEnd:function(e){this.$refs.refresh.refreshEnd(e)},isRefresh:function(){this.getVideoList(0)},tabSelect:function(t){e.navigateTo({url:"/pages/videoPage/videoPlayer/videoPlayer?video="+JSON.stringify(t)})},getVideoList:function(e){var t=1;this.currentTab1=this.currentTab,"3"==e&&(t=this.paramsForEachPage.length),this.urlRequest(0,e,t)},urlRequest:function(){var t=l(n.default.mark(function t(a,o,s){var u,c,h,l,d,g,f,p,v,m;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return u=this.paramsForEachPage[this.currentTab+a],u.currentPageNum=this.pages[this.currentTab+a],console.log(i("getVideoList请求当前标题数组"+(this.currentTab+a)+"当前所在的页数 "+this.pages[this.currentTab+a]+"获取的条件是"+u," at pages\\videoPage\\videoPage.vue:293")),"0"!=o&&"4"!=o||(u.currentPageNum=0),t.next=6,e.request({url:this.$serverUrl+"/getVideoList",data:u,method:"POST",header:{"content-type":"application/json"},timeout:"100000"});case 6:if(c=t.sent,h=r(c,2),l=h[0],d=h[1],l)e.showToast({icon:"fail",title:"网络错误"}),"1"==o?(this.pages[this.currentTab]--,e.hideLoading()):"0"==o&&this.$refs.refresh.endAfter();else{if(200!==d.statusCode)console.log(i("请求主题信息失败:",d," at pages\\videoPage\\videoPage.vue:326"));else{for(console.log(i(d.data," at pages\\videoPage\\videoPage.vue:328")),g=d.data.content,f=[],p=0;p<g.length;p++)v=g[p],m=this.getVideoFromJavaToPage(v),f.push(m);"3"==o?this.list[this.currentTab+a]=f:"1"==o?(console.log(i("下拉更新 "+f," at pages\\videoPage\\videoPage.vue:347")),0==f.length&&(e.showToast({icon:"success",title:"没有更多了"}),this.pages[this.currentTab]=this.pages[this.currentTab]-1),this.list[this.currentTab+a]=this.list[this.currentTab+a].concat(f),e.hideLoading()):"0"==o?(console.log(i("刷新获取的数据是 "+f," at pages\\videoPage\\videoPage.vue:361")),f.length>0&&f[0].id==this.list[this.currentTab+a][0].id?e.showToast({icon:"success",title:"已是最新"}):(this.list[this.currentTab+a]=f,this.pages[this.currentTab]=0,e.showToast({icon:"success",title:"刷新成功"})),this.$refs.refresh.endAfter()):4==o&&(console.log(i("分类获取的数据是 "+f," at pages\\videoPage\\videoPage.vue:378")),this.list[this.currentTab1+a]=f,this.pages[this.currentTab1]=0)}a++,a<s?this.urlRequest(a,o,s):this.$forceUpdate()}case 11:case"end":return t.stop()}},t,this)}));function a(e,a,i){return t.apply(this,arguments)}return a}(),getVideoFromJavaToPage:function(e){var t=e.showScore;1==t.length?t+=".0":0==t.length?t="0.0":4==t.length&&(t=t.slice(0,2));var a=e.newInfo;0==a.length&&(a="HD高清");var i=e.name;0==i.length&&(i="无");var n={id:e.id,name:i,new_info:a,show_score:t,picture:e.pictureUrl,director:e.director,actors:e.actors,release_time:e.releaseTime,updated_time:e.updatedTime,area:e.area,language:e.language,film_length:e.filmLength,film_synopsis:e.filmSynopsis.trim(),show_url:e.lookUrl,down_url:e.downUrl};return n},getHotVideo:function(){var t=l(n.default.mark(function t(){var a,o,s,u,c,h,l,d,g,f,p,v,m;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request({url:this.$serverUrl+"/getHot",data:"",method:"POST",header:{"content-type":"application/json"},timeout:"100000"});case 2:if(a=t.sent,o=r(a,2),s=o[0],u=o[1],s)console.log(i("获取轮播图失败"," at pages\\videoPage\\videoPage.vue:450"));else{for(this.listHot=[[]],c=u.data,[],h=c.最热,l=c.热播电影,d=c.热播电视剧,g=c.热播综艺节目,f=c.热播动漫,p=0;p<h.length;p++)v=h[p],m=this.getVideoFromJavaToPage(v),m.showName="最热",this.listHot[0].push(m);for(this.listHot.push([]),p=0;p<l.length;p++)v=l[p],m=this.getVideoFromJavaToPage(v),m.showName="热播电影",this.listHot[1].push(m);for(this.listHot.push([]),p=0;p<d.length;p++)v=d[p],m=this.getVideoFromJavaToPage(v),m.showName="热播电视剧",this.listHot[2].push(m);for(this.listHot.push([]),p=0;p<g.length;p++)v=g[p],m=this.getVideoFromJavaToPage(v),m.showName="热播综艺节目",this.listHot[3].push(m);for(this.listHot.push([]),p=0;p<f.length;p++)v=f[p],m=this.getVideoFromJavaToPage(v),m.showName="热播动漫",this.listHot[4].push(m);console.log(i("轮播图数据"+u.data," at pages\\videoPage\\videoPage.vue:519"))}case 7:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),onClickButton:function(e,t,a,n){var o=this;this.clickButtonIds[this.currentTab].cid[e]=t,this.$set(this.paramsForEachPage[this.currentTab],a,n),this.$forceUpdate(),console.log(i(this.paramsForEachPage," at pages\\videoPage\\videoPage.vue:531")),this.getVideoList(4),this.toView="",setTimeout(function(){o.toView="top"+o.currentTab},10)},showFilter:function(e){console.log(i("点击"," at pages\\videoPage\\videoPage.vue:545")),"hide"==this.showOrHide?(this.showOrHide="show",this.xuanzhuan="up"):(this.showOrHide="hide",this.xuanzhuan="down")},confirm:function(t){console.log(i("输入了"+t.detail.value," at pages\\videoPage\\videoPage.vue:556")),plus.key.hideSoftKeybord(),0!=t.detail.value.trim().length&&e.navigateTo({url:"/pages/videoPage/serch/serch?msg="+t.detail.value.trim()})},getFilter:function(){var t=l(n.default.mark(function t(){var a,o,s,u,c,h,l;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request({url:this.$serverUrl+"/getSearchFilter",method:"POST",header:{"content-type":"application/json"}});case 2:if(a=t.sent,o=r(a,2),s=o[0],u=o[1],s)console.log(i("请求主题信息失败:",s," at pages\\videoPage\\videoPage.vue:588"));else{for(console.log(i(u.data," at pages\\videoPage\\videoPage.vue:590")),c=u.data,this.paramsForEachPageShow=c,this.clickButtonIds=[],h=0;h<c.length;h++)l={cid:[0,0,0,0]},this.clickButtonIds.push(l);this.$forceUpdate()}case 7:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),getCatogory:function(){var t=l(n.default.mark(function t(){var a,o,s,u,c,h,l;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request({url:this.$serverUrl+"/getCategory",method:"POST"});case 2:if(a=t.sent,o=r(a,2),s=o[0],u=o[1],s)console.log(i("请求主题getCatogory失败:",s," at pages\\videoPage\\videoPage.vue:615"));else{for(console.log(i("请求主题getCatogory返回的数据是:"+u.data," at pages\\videoPage\\videoPage.vue:617")),c=u.data,this.tabTitle=[],this.paramsForEachPage=[],this.pages=[],h=0;h<c.length;h++)this.tabTitle.push(c[h].name),l=c[h].id,this.paramsForEachPage.push({ppid:l,pids:"",years:"",area:"",sortWay:"0",currentPageNum:0,pageSize:8}),this.pages.push(0);this.getVideoList("3"),this.getHotVideo(),this.getFilter(),this.isShowPay()}case 7:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),isShowPay:function(){var t=l(n.default.mark(function t(){var a,o,s,u;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request({url:this.$serverUrl+"/isShowPay",method:"POST",header:{"content-type":"application/json"}});case 2:a=t.sent,o=r(a,2),s=o[0],u=o[1],getApp().globalData.isShowPay=s?"true":u.data+"",console.log(i("是否启用vip机制"+u.data," at pages\\videoPage\\videoPage.vue:670"));case 8:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()}};t.default=m}).call(this,a("6e42")["default"],a("0de9")["default"])},"7f30":function(e,t,a){"use strict";(function(e){a("e36c"),a("921b");i(a("66fd"));var t=i(a("8045"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},8045:function(e,t,a){"use strict";a.r(t);var i=a("1d40"),n=a("d8e2");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("9e4b");var r,s=a("f0c5"),u=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=u.exports},8450:function(e,t,a){},"9e4b":function(e,t,a){"use strict";var i=a("8450"),n=a.n(i);n.a},d8e2:function(e,t,a){"use strict";a.r(t);var i=a("7d1a"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);t["default"]=n.a}},[["7f30","common/runtime","common/vendor"]]]);